Page({
  data: {
    selectedCategory: 'statement', // 默认选择陈述类
    currentCard: '', // 当前显示的卡片内容
    isCardVisible: false, // 卡片是否可见
    isCardShaking: false, // 卡片是否在抖动
    isDrawing: false, // 是否正在抽卡，用于防抖
    // 卡牌数据
   "cards": {
    "statement": [
      "讲一个你最尴尬的事",
      "分享一件你最近开心的事",
      "说一个你最讨厌的人",
      "分享一个你的小秘密",
      "讲一件你最难忘的事",
      "说一个你最崇拜的人",
      "分享一个你的梦想",
      "讲一件你最后悔的事",
      "说一个你最害怕的东西",
      "分享一个你的小习惯",
      "说一件你小时候的糗事",
      "分享一次你“社死”的瞬间",
      "讲一次你被骗的经历",
      "说一个你身上的怪癖",
      "分享一次你暗恋的经历",
      "讲一件让你泪崩的小事",
      "说一个你最近的小确幸",
      "分享一次你中奖的经历",
      "讲一件你为自己感到骄傲的事",
      "说一个你不敢告诉父母的秘密",
      "分享一次你印象最深刻的旅行",
      "讲一件你做过最勇敢的事",
      "说一个你最近学会的新技能",
      "分享一次你看到的暖心瞬间",
      "讲一件你童年最快乐的事",
      "说一个你最近的小烦恼",
      "分享一次你与家人难忘的过节经历",
      "讲一件你为朋友做的感动的事",
      "说一个你最近的新发现",
      "分享一次你心跳加速的瞬间",
      "讲一件你无法原谅的事",
      "说一个你保持多年的爱好",
      "分享一次你灵异或奇怪的梦",
      "讲一件你希望重新来过的事",
      "说一个你最喜欢的地方",
      "分享一次你感到极度孤独的时刻",
      "讲一件你被陌生人温暖的经历",
      "说一个你最近的口头禅",
      "分享一次你印象深刻的偶遇",
      "讲一件你坚持最久的事情",
      "说一个你最近放弃的东西",
      "分享一次你喜极而泣的经历",
      "讲一件你感到最内疚的事",
      "说一个你对未来的期待",
      "分享一次你“豁然开朗”的顿悟时刻",
      "讲一件你与朋友间的趣事",
      "说一个你收到的意外惊喜",
      "分享一次你感到被深深理解的瞬间",
      "讲一件你做过最疯狂的事",
      "说一个你此刻最想说的话"
    ],
    "action": [
      "站起来喝酒",
      "做10个俯卧撑",
      "模仿一个动物",
      "唱一首歌",
      "跳一段舞",
      "做一个鬼脸",
      "学婴儿哭",
      "表演一个魔术",
      "用鼻子画圈",
      "单脚站立10秒",
      "做5个蛙跳",
      "用屁股写自己的名字",
      "对着窗外大喊“我是最美的”",
      "原地转10圈后走直线",
      "模仿一位在场的玩家",
      "用奇怪的声音读一段台词",
      "表演“一秒钟内变脸”",
      "做一套广播体操",
      "模仿一段经典电影台词",
      "展示一个瑜伽高难度动作",
      "闭眼金鸡独立30秒",
      "用嘴接住抛起的零食",
      "表演“中彩票”后的反应",
      "倒唱一首儿歌",
      "用肢体表演一个成语",
      "学模特走猫步绕场一周",
      "表演“触电”的感觉",
      "一口气说一段绕口令",
      "不用手，吃掉放在额上的饼干",
      "表演“手机没信号”的焦急状态",
      "模仿一位知名歌手唱歌",
      "假装在滑冰场滑倒",
      "用三种不同语气说“我爱你”",
      "表演“便秘”的样子",
      "学恐龙走路",
      "假装你是一只蚊子",
      "表演“吃酸柠檬”的表情变化",
      "学机器人跳舞",
      "假装在打一套降龙十八掌",
      "表演“烫舌头”",
      "学老太太走路",
      "假装你是指挥家，指挥交响乐",
      "表演“脚底踩了狗屎”",
      "学小鸡舞",
      "假装你是天气预报员",
      "表演“丝袜套头”",
      "学海狮鼓掌",
      "假装你在拍洗发水广告",
      "表演“憋尿”",
      "学迈克尔杰克逊的经典动作"
    ],
    "interaction": [
      "和左边的人碰杯",
      "给右边的人讲个笑话",
      "和对面的人击掌",
      "对旁边的人说我爱你",
      "和全场的人碰杯",
      "给一个人按摩肩膀",
      "和旁边的人拥抱",
      "对一个人做飞吻",
      "和一个人猜拳",
      "给一个人倒酒",
      "喂左边的人吃一口东西",
      "和右边的人喝交杯酒",
      "夸赞对面的人三个优点",
      "选择一个异性，进行深情对视10秒",
      "与左边的人合作表演一个节目",
      "对右边的人说一句真心话",
      "帮一个人整理头发或衣着",
      "和一个人十指相扣唱情歌",
      "选择一个异性，说一段土味情话",
      "邀请一个人跳一支舞",
      "和左边的人玩“你画我猜”",
      "对右边的人进行一次“采访”",
      "与对面的人分享一个秘密",
      "给一个人深情一吻（部位自选）",
      "和一个人自拍并做鬼脸",
      "选择一个异性，背对背挤爆气球",
      "对左边的人说“你好讨厌”",
      "和右边的人交头接耳传一句话",
      "给一个人公主抱（或被抱）",
      "邀请一个人共同完成下个大冒险",
      "模仿在场一位玩家的习惯动作",
      "和左边的人说“我们和好吧”",
      "给右边的人一个温暖的祝福",
      "与对面的人交换一件随身物品佩戴",
      "选择一个异性，表演求婚场景",
      "帮一个人涂口红",
      "和一个人用身体挤爆气球",
      "对左边的人唱一首儿歌",
      "和右边的人说“下轮我帮你喝酒”",
      "给一个人擦鞋",
      "选择一个异性，表演“吵架和好”",
      "和左边的人说“你最好看”",
      "给右边的人一个“安慰的抱抱”",
      "与一个人合作画出对方肖像",
      "对全场异性送一个飞吻",
      "选择一个异性，喂对方吃水果",
      "和一个人分享一件开心事",
      "给左边的人一个肯定的眼神",
      "和右边的人约定一件事",
      "对一个人说“有你真好”"
    ],
    "hell": [
      "喝完一杯酒",
      "连续喝三杯酒",
      "表演一个性感的舞蹈",
      "打电话给前任",
      "在群里发一个红包",
      "裸着上身跳舞",
      "喝一杯混合酒",
      "对服务员说我爱你",
      "在地上打滚",
      "表演吃辣椒比赛",
      "干喝一杯柠檬汁",
      "吃一片沾满芥末的面包",
      "对着楼下大喊“我好寂寞”",
      "发表1分钟分手感言",
      "跳一段钢管舞",
      "用微信状态表白一位异性",
      "喝一杯“特调”饮料",
      "录一段鬼畜视频发朋友圈",
      "秀出你的肚腩或腹肌",
      "对通讯录第3位说“我想你”",
      "表演“屁股写字”",
      "一口气喝完一瓶啤酒",
      "在朋友圈发素颜丑照",
      "模仿一种色情片的声音",
      "用脚趾夹东西喂给别人吃",
      "倒立10秒钟",
      "亲吻墙壁10秒",
      "把自己塞进垃圾桶",
      "表演“生吃茄子”",
      "用马桶水洗脸",
      "对下一位进门的顾客告白",
      "分享你的浏览器历史记录",
      "跳进泳池或浴缸",
      "亲吻一位同性的脚",
      "吃一整个生大蒜",
      "表演“内衣秀”",
      "给暧昧对象发语音唱情歌",
      "舔自己的脚肘",
      "用辣椒油刷牙",
      "表演“马桶上的思考者”",
      "对Siri说“嫁给我吧”",
      "穿内衣出门跑一圈",
      "喝一杯含酱油的可乐",
      "直播卸妆",
      "亲吻一位陌生异性",
      "倒立洗头",
      "表演“喷饭”",
      "用方言朗诵《再别康桥》",
      "模仿如厕的声音",
      "完成在场所有人指定的一个任务"
    ]
  }
  },

  // 选择分类
  selectCategory(e) {
    const category = e.currentTarget.dataset.category;
    this.setData({
      selectedCategory: category,
      isCardVisible: false,
      currentCard: ''
    });
  },

  // 抽卡函数
  drawCard() {
    // 防抖：如果正在抽卡，直接返回
    if (this.data.isDrawing) {
      return;
    }

    // 设置正在抽卡状态
    this.setData({
      isDrawing: true,
      isCardVisible: false
    });

    // 短暂延迟后显示新卡片并添加动画
    setTimeout(() => {
      const category = this.data.selectedCategory;
      const cards = this.data.cards[category];
      const randomIndex = Math.floor(Math.random() * cards.length);
      const randomCard = cards[randomIndex];

      // 显示卡片并添加抖动动画
      this.setData({
        currentCard: randomCard,
        isCardVisible: true,
        isCardShaking: true
      });

      // 动画结束后取消抖动状态并重置抽卡状态
      setTimeout(() => {
        this.setData({
          isCardShaking: false,
          isDrawing: false
        });
      }, 600); // 与动画时间一致
    }, 300);
  }
});